{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"E:\\\\Education Survey Mern\\\\client\\\\src\\\\context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport function useAuth() {\n  _s();\n  return useContext(AuthContext);\n}\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function AuthProvider({\n  children\n}) {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Check if user is logged in\n    const checkLoggedIn = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n          const res = await axios.get(\"/api/auth/me\");\n          setUser(res.data);\n        }\n      } catch (error) {\n        console.error(\"Authentication error:\", error);\n        localStorage.removeItem(\"token\");\n        delete axios.defaults.headers.common[\"Authorization\"];\n      } finally {\n        setLoading(false);\n      }\n    };\n    checkLoggedIn();\n  }, []);\n  const login = async (email, password) => {\n    try {\n      const res = await axios.post(\"/api/auth/login\", {\n        email,\n        password\n      });\n      localStorage.setItem(\"token\", res.data.token);\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`;\n      setUser(res.data.user);\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Login error:\", error);\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Login failed\";\n      toast.error(message);\n      return {\n        success: false,\n        message\n      };\n    }\n  };\n  const signup = async (name, email, password) => {\n    try {\n      const res = await axios.post(\"/api/auth/register\", {\n        name,\n        email,\n        password\n      });\n      localStorage.setItem(\"token\", res.data.token);\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`;\n      setUser(res.data.user);\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"Signup error:\", error);\n      const message = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Signup failed\";\n      toast.error(message);\n      return {\n        success: false,\n        message\n      };\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    delete axios.defaults.headers.common[\"Authorization\"];\n    setUser(null);\n    toast.success(\"Logged out successfully\");\n  };\n  const updateProfile = async userData => {\n    try {\n      const res = await axios.put(\"/api/users/profile\", userData);\n      setUser(res.data);\n      toast.success(\"Profile updated successfully\");\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error(\"Update profile error:\", error);\n      const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Failed to update profile\";\n      toast.error(message);\n      return {\n        success: false,\n        message\n      };\n    }\n  };\n  const updatePassword = async passwordData => {\n    try {\n      await axios.put(\"/api/users/password\", passwordData);\n      toast.success(\"Password updated successfully\");\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error(\"Update password error:\", error);\n      const message = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"Failed to update password\";\n      toast.error(message);\n      return {\n        success: false,\n        message\n      };\n    }\n  };\n  const value = {\n    user,\n    loading,\n    login,\n    signup,\n    logout,\n    updateProfile,\n    updatePassword\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 10\n  }, this);\n}\n_s2(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","_s2","createContext","useState","useContext","useEffect","axios","toast","jsxDEV","_jsxDEV","AuthContext","useAuth","AuthProvider","children","user","setUser","loading","setLoading","checkLoggedIn","token","localStorage","getItem","defaults","headers","common","res","get","data","error","console","removeItem","login","email","password","post","setItem","success","_error$response","_error$response$data","message","response","signup","name","_error$response2","_error$response2$data","logout","updateProfile","userData","put","_error$response3","_error$response3$data","updatePassword","passwordData","_error$response4","_error$response4$data","value","Provider","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/Education Survey Mern/client/src/context/AuthContext.jsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useState, useContext, useEffect } from \"react\"\nimport axios from \"axios\"\nimport { toast } from \"react-toastify\"\n\nconst AuthContext = createContext()\n\nexport function useAuth() {\n  return useContext(AuthContext)\n}\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // Check if user is logged in\n    const checkLoggedIn = async () => {\n      try {\n        const token = localStorage.getItem(\"token\")\n\n        if (token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n          const res = await axios.get(\"/api/auth/me\")\n          setUser(res.data)\n        }\n      } catch (error) {\n        console.error(\"Authentication error:\", error)\n        localStorage.removeItem(\"token\")\n        delete axios.defaults.headers.common[\"Authorization\"]\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    checkLoggedIn()\n  }, [])\n\n  const login = async (email, password) => {\n    try {\n      const res = await axios.post(\"/api/auth/login\", { email, password })\n      localStorage.setItem(\"token\", res.data.token)\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`\n      setUser(res.data.user)\n      return { success: true }\n    } catch (error) {\n      console.error(\"Login error:\", error)\n      const message = error.response?.data?.message || \"Login failed\"\n      toast.error(message)\n      return { success: false, message }\n    }\n  }\n\n  const signup = async (name, email, password) => {\n    try {\n      const res = await axios.post(\"/api/auth/register\", { name, email, password })\n      localStorage.setItem(\"token\", res.data.token)\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`\n      setUser(res.data.user)\n      return { success: true }\n    } catch (error) {\n      console.error(\"Signup error:\", error)\n      const message = error.response?.data?.message || \"Signup failed\"\n      toast.error(message)\n      return { success: false, message }\n    }\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"token\")\n    delete axios.defaults.headers.common[\"Authorization\"]\n    setUser(null)\n    toast.success(\"Logged out successfully\")\n  }\n\n  const updateProfile = async (userData) => {\n    try {\n      const res = await axios.put(\"/api/users/profile\", userData)\n      setUser(res.data)\n      toast.success(\"Profile updated successfully\")\n      return { success: true }\n    } catch (error) {\n      console.error(\"Update profile error:\", error)\n      const message = error.response?.data?.message || \"Failed to update profile\"\n      toast.error(message)\n      return { success: false, message }\n    }\n  }\n\n  const updatePassword = async (passwordData) => {\n    try {\n      await axios.put(\"/api/users/password\", passwordData)\n      toast.success(\"Password updated successfully\")\n      return { success: true }\n    } catch (error) {\n      console.error(\"Update password error:\", error)\n      const message = error.response?.data?.message || \"Failed to update password\"\n      toast.error(message)\n      return { success: false, message }\n    }\n  }\n\n  const value = {\n    user,\n    loading,\n    login,\n    signup,\n    logout,\n    updateProfile,\n    updatePassword,\n  }\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}